<!DOCTYPE html>
<!-- saved from url=(0037)http://www.jianshu.com/p/9a652250e0d1 -->
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
<script type="text/javascript" src="./ArrayBlockingQueue源码分析 - 简书_files/1255494d3a"></script><script src="./ArrayBlockingQueue源码分析 - 简书_files/nr-998.min.js.download"></script><script src="./ArrayBlockingQueue源码分析 - 简书_files/push.js.download"></script><script async="" src="./ArrayBlockingQueue源码分析 - 简书_files/analytics.js.download"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"1255494d3a","applicationID":"15702971","transactionName":"e1daR0JWVV9RER9ZWkxdRxxDUVZE","queueTime":1,"applicationTime":68,"agent":""}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(){}function o(e,t,n){return function(){return i(e,[(new Date).getTime()].concat(u(arguments)),t?null:this,n),t?void 0:this}}var i=e("handle"),a=e(2),u=e(3),c=e("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var s=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit"],l="api-",p=l+"ixn-";a(s,function(e,t){f[t]=o(l+t,!0,"api")}),f.addPageAction=o(l+"addPageAction",!0),f.setCurrentRouteName=o(l+"routeName",!0),t.exports=newrelic,f.interaction=function(){return(new r).get()};var d=r.prototype={createTracer:function(e,t){var n={},r=this,o="function"==typeof t;return i(p+"tracer",[Date.now(),e,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return t.apply(this,arguments)}finally{c.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){d[t]=o(p+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?c(e,u,i):i()}function n(n,r,o){if(!p.aborted){e&&e(n,r,o);for(var i=t(o),a=v(n),u=a.length,c=0;c<u;c++)a[c].apply(i,r);var f=s[w[n]];return f&&f.push([y,n,r,i]),i}}function d(e,t){b[e]=v(e).concat(t)}function v(e){return b[e]||[]}function g(e){return l[e]=l[e]||o(n)}function m(e,t){f(e,function(e,n){t=t||"feature",w[n]=t,t in s||(s[t]=[])})}var b={},w={},y={on:d,emit:n,get:g,listeners:v,context:t,buffer:m,abort:a,aborted:!1};return y}function i(){return new r}function a(){(s.api||s.feature)&&(p.aborted=!0,s=p.backlog={})}var u="nr@context",c=e("gos"),f=e(2),s={},l={},p=t.exports=o();p.backlog=s},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!h++){var e=y.info=NREUM.info,t=l.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return f.abort();c(b,function(t,n){e[t]||(e[t]=n)}),u("mark",["onload",a()],null,"api");var n=l.createElement("script");n.src="https://"+e.agent,t.parentNode.insertBefore(n,t)}}function o(){"complete"===l.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=e("ee"),s=window,l=s.document,p="addEventListener",d="attachEvent",v=s.XMLHttpRequest,g=v&&v.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:v,REQ:s.Request,EV:s.Event,PR:s.Promise,MO:s.MutationObserver},e(1);var m=""+location,b={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-998.min.js"},w=v&&g&&g[p]&&!/CriOS/.test(navigator.userAgent),y=t.exports={offset:a(),origin:m,features:{},xhrWrappable:w};l[p]?(l[p]("DOMContentLoaded",i,!1),s[p]("load",r,!1)):(l[d]("onreadystatechange",o),s[d]("onload",r)),u("mark",["firstbyte",a()],null,"api");var h=0},{}]},{},["loader"]);</script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="description" content="前言本文的主要详细分析ArrayBlockingQueue的实现原理，由于该并发集合其底层是使用了java.util.ReentrantLock和java.util.Condition来完成并发控制的，我们可以通过JDK的源代码更好的学习这些并发控制类的使用，同时该类也是所有并发集合中最简单的一个，分析该类的源码也是为之后分析其他并发集合做好基础。1.Queue接口和BlockingQueue接口回顾1.1Queue接口回顾在Queue接口中，除了继承Collection接口中定义的方法外，它还分别额外地定义插入、删除、查询这3个操作，其中每一个操...">
  <meta property="wb:webmaster" content="294ec9de89e7fadb">
  <meta property="qc:admins" content="104102651453316562112116375">
  <meta property="qc:admins" content="11635613706305617">
  <meta property="qc:admins" content="1163561616621163056375">
  <meta name="google-site-verification" content="cV4-qkUJZR6gmFeajx_UyPe47GW9vY6cnCrYtCHYNh4">
  <meta name="google-site-verification" content="HF7lfF8YEGs1qtCE-kPml8Z469e2RHhGajy6JPVy5XI">
  <meta http-equiv="mobile-agent" content="format=html5; url=http://www.jianshu.com/p/9a652250e0d1">
    <!--  Meta for Smart App Banner -->
  <meta name="apple-itunes-app" content="app-id=888237539, app-argument=jianshu://notes/3164580">
  <!-- End -->

  <!--  Meta for Twitter Card -->
  <meta content="summary" property="twitter:card">
  <meta content="@jianshucom" property="twitter:site">
  <meta content="ArrayBlockingQueue源码分析" property="twitter:title">
  <meta content="前言本文的主要详细分析ArrayBlockingQueue的实现原理，由于该并发集合其底层是使用了java.util.ReentrantLock和java.util.Condition来完成并发控制的，我们可以通过JDK的源代码更好的学习这些并发控制类的使用，同时该类也是所有并发集合中最简单的一个，分析该类的源码也是为之后分析其他并发集合做好基础。1.Queue接口和BlockingQueue接口回顾1.1Queue接口回顾在Queue接口中，除了继承Collection接口中定义的方法外，它还分别额外地定义插入、删除、查询这3个操作，其中每一个操..." property="twitter:description">
  <meta content="http://www.jianshu.com/p/9a652250e0d1" property="twitter:url">
  <!-- End -->

  <!--  Meta for OpenGraph -->
  <meta property="fb:app_id" content="865829053512461">
  <meta property="og:site_name" content="简书">
  <meta property="og:title" content="ArrayBlockingQueue源码分析">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://www.jianshu.com/p/9a652250e0d1">
  <meta property="og:description" content="前言本文的主要详细分析ArrayBlockingQueue的实现原理，由于该并发集合其底层是使用了java.util.ReentrantLock和java.util.Condition来完成并发...">
  <!-- End -->

  <!--  Meta for Facebook Applinks -->
  <meta property="al:ios:url" content="jianshu://notes/3164580">
  <meta property="al:ios:app_store_id" content="888237539">
  <meta property="al:ios:app_name" content="简书">

  <meta property="al:android:url" content="jianshu://notes/3164580">
  <meta property="al:android:package" content="com.jianshu.haruki">
  <meta property="al:android:app_name" content="简书">
  <!-- End -->

  <title>ArrayBlockingQueue源码分析 - 简书</title>
  <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="6czDBASVI32r59fBfsdYS7v6x2gsAQMvv2+vvPLBVONQCzvJIAbVe6U5hmibELOknQ7VyskOyQjQDkP2Vi+DeA==">
  <!--[if lte IE 8]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="stylesheet" media="all" href="./ArrayBlockingQueue源码分析 - 简书_files/base-00828532d00225531ad20ff45bf311ea.css">

    <link rel="stylesheet" media="all" href="./ArrayBlockingQueue源码分析 - 简书_files/reading-note-a4d1e4bd26d83f631d58a76778118af6.css">
  <link rel="stylesheet" media="all" href="./ArrayBlockingQueue源码分析 - 简书_files/base-read-mode-5f4051bc94fc595e8bc00821aae6c3e1.css">
  <script src="./ArrayBlockingQueue源码分析 - 简书_files/modernizr-613ea63b5aa2f0e2a1946e9c28c8eedb.js.download"></script>
  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if IE 8]><link rel="stylesheet" media="all" href="http://cdn-qn0.jianshu.io/assets/scaffolding/for_ie-7f1c477ffedc13c11315103e8787dc6c.css" /><![endif]-->
  <!--[if lt IE 9]><link rel="stylesheet" media="all" href="http://cdn-qn0.jianshu.io/assets/scaffolding/for_ie-7f1c477ffedc13c11315103e8787dc6c.css" /><![endif]-->
  <link href="http://baijii-common.b0.upaiyun.com/icons/favicon.ico" rel="icon">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/57-b426758a1fcfb30486f20fd073c3b8ec.png" sizes="57x57">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/72-feca4b183b9d29fd188665785dc7a7f1.png" sizes="72x72">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/76-ba757f1ad3421192ce7192170393d2b0.png" sizes="76x76">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/114-8dae53b3bcea3f06bb139e329d1edab3.png" sizes="114x114">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/120-fa315ee0177dba4c55d4f66d4129b47f.png" sizes="120x120">
      <link rel="apple-touch-icon-precomposed" href="http://cdn-qn0.jianshu.io/assets/apple-touch-icons/152-052f5799bec8fb3aa624bdc72ef5bd1d.png" sizes="152x152">

<style type="text/css"></style></head>

<body class="post output zh cn win reader-day-mode reader-font2" data-js-module="note-show" data-locale="zh-CN">
  
  <div class="navbar navbar-jianshu shrink">
  <div class="dropdown">
    <a class="dropdown-toggle logo" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="javascript:void(0)">
      简
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
      <li><a href="http://www.jianshu.com/"><i class="fa fa-home"></i> 首页</a></li>
      <li><a href="http://www.jianshu.com/collections"><i class="fa fa-th"></i> 专题</a></li>
    </ul>
  </div>
</div>
<div class="navbar-user">
    <a class="app-download-btn" href="http://www.jianshu.com/apps/download?utm_medium=top-sugg-down&amp;utm_source=web-other-page">App下载</a>
    <a class="login" data-signup-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_up">
      <i class="fa fa-user"></i> 注册
</a>    <a class="login" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
      <i class="fa fa-sign-in"></i> 登录
</a>    <a class="daytime set-view-mode pull-right" href="javascript:void(0)"><i class="fa fa-moon-o"></i></a>
</div>
<div class="navbar navbar-jianshu expanded">
  <div class="dropdown">
      <a class="active logo" role="button" data-original-title="个人主页" data-container="div.expanded" href="http://www.jianshu.com/">
        <b>简</b><i class="fa fa-home"></i><span class="title">首页</span>
</a>      <a data-toggle="tooltip" data-placement="right" data-original-title="专题" data-container="div.expanded" href="http://www.jianshu.com/collections">
        <i class="fa fa-th"></i><span class="title">专题</span>
</a>    <a class="ad-selector" href="http://www.jianshu.com/apps">
      <i class="fa fa-mobile"></i><span class="title">下载手机应用</span>
</a>    <div class="ad-container ">
      <div class="ad-pop">
        <img class="ad-logo" src="./ArrayBlockingQueue源码分析 - 简书_files/228-0765f118055a1d942fc286fb55f37773.png" alt="228">
        <p class="ad-title">简书</p>
        <p class="ad-subtitle">交流故事，沟通想法</p>
        <img class="ad-qrcode" src="./ArrayBlockingQueue源码分析 - 简书_files/download-app-qrcode-053849fa25f9b44573ef8dd3c118a20f.png" alt="Download app qrcode">
        <div>
          <a class="ad-link" href="https://itunes.apple.com/cn/app/jian-shu/id888237539?ls=1&amp;mt=8">iOS</a>·
          <a class="ad-link" href="http://downloads.jianshu.io/apps/haruki/JianShu-1.11.5.apk">Android</a>
        </div>
      </div>
    </div>
  </div>
  <div class="nav-user">
      <a href="http://www.jianshu.com/p/9a652250e0d1#view-mode-modal" data-toggle="modal"><i class="fa fa-font"></i><span class="title">显示模式</span></a>

      <a class="signin" data-signin-link="true" data-toggle="modal" data-placement="right" data-original-title="登录" data-container="div.expanded" href="http://www.jianshu.com/sign_in">
        <i class="fa fa-sign-in"></i><span class="title">登录</span>
</a>    </div>
  </div>

  
      <div class="popover-wrap">
       <div class="fixed-btn note-fixed-download" data-toggle="popover" data-placement="left" data-html="true" data-trigger="hover" data-content="&lt;img src=&quot;http://cdn-qn0.jianshu.io/assets/app-page/note-qrcode-599086b03613e4f65dce8698fe9bcc99.png&quot; alt=&quot;Note qrcode&quot; /&gt;" data-original-title="" title="">
        <a class="qrcode" href="javascript:void(0)">
          <img src="./ArrayBlockingQueue源码分析 - 简书_files/icon_qrcode-1f27688ec77df5a8c6c6ea70aa181874.png" alt="Icon qrcode">
          <div>简书手机版下载</div>
</a>      </div>
    </div>
    <div class="fixed-btn">
      <a class="go-top hide-go-top" href="http://www.jianshu.com/p/9a652250e0d1#"> <i class="fa fa-angle-up"></i></a>
      <a class="writer" href="http://www.jianshu.com/writer#/" data-toggle="tooltip" data-placement="left" title="" data-original-title="写篇文章"><i class="fa fa-pencil"></i></a>
    </div>


  <div id="show-note-container" class="imagebubble-container imagebubble-mode-off">
    
<div class="post-bg" id="flag">
  <div class="wrap-btn" style="top: -1px;">
    <!-- Notebook and collections button upper left -->
      <div class="article-related pull-left">
          <a class="collection-menu-btn" data-toggle="modal" data-target="#collection-menu" href="javascript:void(null);">
            <i class="fa fa-th"></i>
</a>          <a class="notebooks-menu-btn" data-toggle="modal" data-target="#notebooks-menu" href="javascript:void(null);"><i class="fa fa-list-ul"></i></a>
        <div class="related-avatar-group activities"></div>
      </div>
    <!-- ******* -->

      <a class="app-download-btn" href="http://www.jianshu.com/apps/download?utm_medium=top-sugg-down&amp;utm_source=note-show">App下载</a>
  <a class="login" data-signup-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_up">
    <i class="fa fa-user"></i> 注册
</a>  <a class="login" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
    <i class="fa fa-sign-in"></i> 登录
</a>

    <!-- Buttons upper right -->
    <!-- ******* -->
  </div>

  <div class="container">
    <!-- Article activities for width under 768px -->
    <div class="related-avatar-group activities"></div>
      <div class="article">
        <div class="preview">
          <div class="author-info">
              <div class="btn btn-small btn-success follow">
    <a data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in"><i class="fa fa-plus"></i>  <span>添加关注</span></a>
  </div>

            <a class="avatar" href="http://www.jianshu.com/users/dc9be3b69337">
              <img src="./ArrayBlockingQueue源码分析 - 简书_files/675ca95f25be.png" alt="100">
</a>            <span class="label">
                作者
            </span>
            <a class="author-name blue-link" href="http://www.jianshu.com/users/dc9be3b69337">
              <span>码农一枚</span>
</a>              <span data-toggle="tooltip" data-original-title="最后编辑于 2016.03.07 21:02">2016.03.05 18:57*</span>
            <div>
              <span>写了31964字</span>，<span>被110人关注</span>，<span>获得了97个喜欢</span>
            </div>
          </div>
          <h1 class="title">ArrayBlockingQueue源码分析</h1>
          <div class="meta-top">
            <span class="wordage">字数1996</span>
            <span class="views-count">阅读355</span>
            <span class="comments-count">评论0</span>
            <span class="likes-count">喜欢0</span>
          </div>

          <!-- Collection/Bookmark/Share for width under 768px -->
          <div class="article-share"><a class="bookmark" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in"> <i class="fa fa-bookmark-o"></i><span>收藏文章</span></a><span> <a href="javascript:void(null)" data-toggle="dropdown"><i class="fa fa-share-square-o"></i> 分享</a> <ul class="dropdown-menu arrow-top"> <li> <a href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f=&#39;http://v.t.sina.com.cn/share/share.php?appkey=1881139527&#39;,u=z||d.location,p=[&#39;&amp;url=&#39;,e(u),&#39;&amp;title=&#39;,e(t||d.title),&#39;&amp;source=&#39;,e(r),&#39;&amp;sourceUrl=&#39;,e(l),&#39;&amp;content=&#39;,c||&#39;gb2312&#39;,&#39;&amp;pic=&#39;,e(p||&#39;&#39;)].join(&#39;&#39;);function%20a(){if(!window.open([f,p].join(&#39;&#39;),&#39;mb&#39;,[&#39;toolbar=0,status=0,resizable=1,width=440,height=430,left=&#39;,(s.width-440)/2,&#39;,top=&#39;,(s.height-430)/2].join(&#39;&#39;)))u.href=[f,p].join(&#39;&#39;);};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,&#39;&#39;,&#39;&#39;,&#39;http://cwb.assets.jianshu.io/notes/images/3164580/weibo/image_53107dc79d91.jpg&#39;, &#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @简书 ）&#39;,&#39;http://www.jianshu.com/p/9a652250e0d1&#39;,&#39;页面编码gb2312|utf-8默认gb2312&#39;));"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/weibo.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:&#39;&#39;,r=&#39;http://www.douban.com/recommend/?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;ArrayBlockingQueue源码分析&#39;)+&#39;&amp;sel=&#39;+e(s)+&#39;&amp;v=1&#39;,x=function(){if(!window.open(r,&#39;douban&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r+&#39;&amp;r=1&#39;};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/douban.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;http://share.v.t.qq.com/index.php?c=share&amp;a=index&amp;url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @jianshuio ）&#39;),x=function(){if(!window.open(r,&#39;tweibo&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/tweibo.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》&#39;),x=function(){if(!window.open(r,&#39;qzone&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/qzone.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://twitter.com/share?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;text=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @jianshucom ）&#39;)+&#39;&amp;related=&#39;+e(&#39;jianshucom&#39;),x=function(){if(!window.open(r,&#39;twitter&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/twitter.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://www.facebook.com/dialog/share?app_id=483126645039390&amp;display=popup&amp;href=http://www.jianshu.com/p/9a652250e0d1&#39;,x=function(){if(!window.open(r,&#39;facebook&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/facebook.png"> </a> </li> <li> <a href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://plus.google.com/share?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;),x=function(){if(!window.open(r,&#39;google_plus&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/google_plus.png"> </a> </li> <li> <a href="http://www.jianshu.com/p/9a652250e0d1"> <img src="./ArrayBlockingQueue源码分析 - 简书_files/renren.png"> </a> </li> </ul></span></div>
          <!-- -->

          <div class="show-content"><h4>前言</h4>
<p>  本文的主要详细分析ArrayBlockingQueue的实现原理，由于该并发集合其底层是使用了java.util.ReentrantLock和java.util.Condition来完成并发控制的，我们可以通过JDK的源代码更好的学习这些并发控制类的使用，同时该类也是所有并发集合中最简单的一个，分析该类的源码也是为之后分析其他并发集合做好基础。</p>
<hr>
<h2>1.Queue接口和BlockingQueue接口回顾</h2>
<h3>1.1 Queue接口回顾</h3>
<blockquote><p>在Queue接口中，除了继承Collection接口中定义的方法外，它还分别额外地定义<strong>插入、删除、查询</strong>这3个操作，其中每一个操作都以两种不同的形式存在，每一种形式都对应着一个方法。</p></blockquote>
<p>方法说明：</p>
<table>
<thead>
<tr>
<th></th>
<th>Throws exception</th>
<th>Returns special value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Insert</strong></td>
<td>add(e)</td>
<td>offer(e)</td>
</tr>
<tr>
<td><strong>Remove</strong></td>
<td>remove()</td>
<td>poll()</td>
</tr>
<tr>
<td><strong>Examine</strong></td>
<td>element()</td>
<td>peek()</td>
</tr>
</tbody>
</table>
<ol>
<li>add方法在将一个元素插入到队列的尾部时，如果出现队列已经满了，那么就会抛出IllegalStateException,而使用offer方法时，如果队列满了，则添加失败,返回false,但并不会引发异常。</li>
<li>remove方法是获取队列的头部元素并且删除，如果当队列为空时，那么就会抛出NoSuchElementException。而poll在队列为空时，则返回一个null。</li>
<li>element方法是从队列中获取到队列的第一个元素，但不会删除，但是如果队列为空时，那么它就会抛出NoSuchElementException。peek方法与之类似，只是不会抛出异常，而是返回false。</li>
</ol>
<p>后面我们在分析ArrayBlockingQueue的方法时，主要也是围绕着这几个方法来进行分析。</p>
<h3>1.2 BlockingQueue接口回顾</h3>
<blockquote><p>BlockingQueue是JDK1.5出现的接口，它在原来的Queue接口基础上提供了更多的额外功能：当获取队列中的头部元素时，如果队列为空，那么它将会使执行线程处于等待状态；当添加一个元素到队列的尾部时，如果队列已经满了，那么它同样会使执行的线程处于等待状态。</p></blockquote>
<p>前面我们在说Queue接口时提到过，它针对于相同的操作提供了2种不同的形式，而BlockingQueue更夸张，针对于相同的操作提供了4种不同的形式。</p>
<blockquote>
<p>该四种形式分别为：</p>
<ol>
<li>抛出异常  </li>
<li>返回一个特殊值(可能是null或者是false，取决于具体的操作)</li>
<li>阻塞当前执行直到其可以继续</li>
<li>当线程被挂起后，等待最大的时间，如果一旦超时，即使该操作依旧无法继续执行，线程也不会再继续等待下去。</li>
</ol>
</blockquote>
<p>对应的方法说明:</p>
<table>
<thead>
<tr>
<th></th>
<th>Throws exception</th>
<th>Returns special value</th>
<th>Blocks</th>
<th>Times out</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Insert</strong></td>
<td>add(e)</td>
<td>offer(e)</td>
<td>put(e)</td>
<td>offer(e, time, unit)</td>
</tr>
<tr>
<td><strong>Remove</strong></td>
<td>remove()</td>
<td>poll()</td>
<td>take()</td>
<td>poll(time, unit)</td>
</tr>
<tr>
<td><strong>Examine</strong></td>
<td>element()</td>
<td>peek()</td>
<td>无</td>
<td>无 </td>
</tr>
</tbody>
</table>
<p>BlockingQueue虽然比起Queue在操作上提供了更多的支持，但是它在使用的使用也应该如下的几点:</p>
<blockquote><ol>
<li>BlockingQueue中是不允许添加null的，该接受在声明的时候就要求所有的实现类在接收到一个null的时候，都应该抛出NullPointerException。</li>
<li>BlockingQueue是线程安全的，因此它的所有和队列相关的方法都具有原子性。但是对于那么从Collection接口中继承而来的批量操作方法，比如addAll(Collection e)等方法，BlockingQueue的实现通常没有保证其具有原子性，因此我们在使用的BlockingQueue，应该尽可能地不去使用这些方法。</li>
<li>BlockingQueue主要应用于生产者与消费者的模型中，其元素的添加和获取都是极具规律性的。但是对于remove(Object o)这样的方法，虽然BlockingQueue可以保证元素正确的删除，但是这样的操作会非常响应性能，因此我们在没有特殊的情况下，也应该避免使用这类方法。</li>
</ol></blockquote>
<h2>2. ArrayBlockingQueue深入分析</h2>
<p>有了上面的铺垫，下面我们就可以真正开始分析ArrayBlockingQueue了。在分析之前，首先让我们看看API对其的描述。<br><strong>注意:这里使用的JDK版本为1.7，不同的JDK版本在实现上存在不同</strong></p>
<div class="image-package imagebubble" widget="ImageBubble">
<img src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-ca508b8735c40257.png" data-original-src="http://upload-images.jianshu.io/upload_images/1684370-ca508b8735c40257.png?imageMogr2/auto-orient/strip%7CimageView2/2" class="imagebubble-image"><br><div class="image-caption">ArrayBlockingQueueAPI说明.png</div>
</div>
<p>首先让我们看下ArrayBlockingQueue的核心组成：</p>
<pre class="hljs java"><code class="java"> <span class="hljs-comment">/** 底层维护队列元素的数组 */</span>
    <span class="hljs-keyword">final</span> Object[] items;

    <span class="hljs-comment">/**  当读取元素时数组的下标(这里称为读下标) */</span>
    <span class="hljs-keyword">int</span> takeIndex;

    <span class="hljs-comment">/** 添加元素时数组的下标 (这里称为写小标)*/</span>
    <span class="hljs-keyword">int</span> putIndex;

    <span class="hljs-comment">/** 队列中的元素个数 */</span>
    <span class="hljs-keyword">int</span> count;

    <span class="hljs-comment">/**用于并发控制的工具类**/</span>
    <span class="hljs-keyword">final</span> ReentrantLock lock;

    <span class="hljs-comment">/** 控制take操作时是否让线程等待 */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Condition notEmpty;

    <span class="hljs-comment">/** 控制put操作时是否让线程等待 */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Condition notFull;</code></pre>
<blockquote><p>take方法分析(369-379行):</p></blockquote>
<pre class="hljs java"><code class="java">    <span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">take</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException </span>{
        <span class="hljs-keyword">final</span> ReentrantLock lock = <span class="hljs-keyword">this</span>.lock;
        <span class="hljs-comment">/*
            尝试获取锁，如果此时锁被其他线程锁占用，那么当前线程就处于Waiting的状态。           
            注意:当方法是支持线程中断响应的如果其他线程此时中断当前线程，
            那么当前线程就会抛出InterruptedException 
         */</span>
        lock.lockInterruptibly();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">/*
          如果此时队列中的元素个数为0,那么就让当前线程wait,并且释放锁。
          注意:这里使用了while进行重复检查，是为了防止当前线程可能由于  其他未知的原因被唤醒。
          (通常这种情况被称为"spurious wakeup")
            */</span>    
        <span class="hljs-keyword">while</span> (count == <span class="hljs-number">0</span>)
                notEmpty.await();
            <span class="hljs-comment">//如果队列不为空，则从队列的头部取元素</span>
            <span class="hljs-keyword">return</span> extract();
        } <span class="hljs-keyword">finally</span> {
             <span class="hljs-comment">//完成锁的释放</span>
            lock.unlock();
        }
    }</code></pre>
<blockquote><p>extract方法分析(163-171):</p></blockquote>
<pre class="hljs java"><code class="java">    <span class="hljs-comment">/*
      根据takeIndex来获取当前的元素,然后通知其他等待的线程。
      Call only when holding lock.(只有当前线程已经持有了锁之后，它才能调用该方法)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> E <span class="hljs-title">extract</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Object[] items = <span class="hljs-keyword">this</span>.items;

        <span class="hljs-comment">//根据takeIndex获取元素,因为元素是一个Object类型的数组,因此它通过cast方法将其转换成泛型。</span>
        E x = <span class="hljs-keyword">this</span>.&lt;E&gt;cast(items[takeIndex]);

        <span class="hljs-comment">//将当前位置的元素设置为null</span>
        items[takeIndex] = <span class="hljs-keyword">null</span>;

        <span class="hljs-comment">//并且将takeIndex++,注意：这里因为已经使用了锁，因此inc方法中没有使用到原子操作</span>
        takeIndex = inc(takeIndex);

        <span class="hljs-comment">//将队列中的总的元素减1</span>
        --count;
        <span class="hljs-comment">//唤醒其他等待的线程</span>
        notFull.signal();
        <span class="hljs-keyword">return</span> x;
    }</code></pre>
<blockquote><p>put方法分析(318-239)</p></blockquote>
<pre class="hljs java"><code class="java">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">put</span><span class="hljs-params">(E e)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>{
        <span class="hljs-comment">//首先检查元素是否为空，否则抛出NullPointerException</span>
        checkNotNull(e);
        <span class="hljs-keyword">final</span> ReentrantLock lock = <span class="hljs-keyword">this</span>.lock;
        <span class="hljs-comment">//进行锁的抢占</span>
        lock.lockInterruptibly();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">/*当队列的长度等于数组的长度,此时说明队列已经满了,这里同样
              使用了while来方式当前线程被"伪唤醒"。*/</span>
            <span class="hljs-keyword">while</span> (count == items.length)
                <span class="hljs-comment">//则让当前线程处于等待状态</span>
                notFull.await();
            <span class="hljs-comment">//一旦获取到锁并且队列还未满时，则执行insert操作。</span>
            insert(e);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">//完成锁的释放</span>
            lock.unlock();
        }
    }

      <span class="hljs-comment">//检查元素是否为空</span>
     <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkNotNull</span><span class="hljs-params">(Object v)</span> </span>{
        <span class="hljs-keyword">if</span> (v == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException();
      }

     <span class="hljs-comment">//该方法的逻辑非常简单</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(E x)</span> </span>{
        <span class="hljs-comment">//将当前元素设置到putIndex位置   </span>
        items[putIndex] = x;
        <span class="hljs-comment">//让putIndex++</span>
        putIndex = inc(putIndex);
        <span class="hljs-comment">//将队列的大小加1</span>
        ++count;
        <span class="hljs-comment">//唤醒其他正在处于等待状态的线程</span>
        notEmpty.signal();
    }</code></pre>
<p><strong>注:ArrayBlockingQueue其实是一个循环队列</strong><br>我们使用一个图来简单说明一下:</p>
<blockquote><p><code>黄色表示数组中有元素</code></p></blockquote>
<div class="image-package imagebubble" widget="ImageBubble">
<img src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-74dd3cf6fd2be432.png" data-original-src="http://upload-images.jianshu.io/upload_images/1684370-74dd3cf6fd2be432.png?imageMogr2/auto-orient/strip%7CimageView2/2" class="imagebubble-image"><br><div class="image-caption">1-1.png</div>
</div><p><br>当再一次执行put的时候,其结果为：</p>
<div class="image-package imagebubble" widget="ImageBubble">
<img src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-bdbe3fe4f43d5130.png" data-original-src="http://upload-images.jianshu.io/upload_images/1684370-bdbe3fe4f43d5130.png?imageMogr2/auto-orient/strip%7CimageView2/2" class="imagebubble-image"><br><div class="image-caption">1-2.png</div>
</div>
<p>此时放入的元素会从头开始置，我们通过其incr方法更加清晰的看出其底层的操作：</p>
<pre class="hljs java"><code class="java">    <span class="hljs-comment">/**
     * Circularly increment i.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">inc</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{
        <span class="hljs-comment">//当takeIndex的值等于数组的长度时,就会重新置为0，这个一个循环递增的过程</span>
        <span class="hljs-keyword">return</span> (++i == items.length) ? <span class="hljs-number">0</span> : i;
    }</code></pre>
<p>至此，ArrayBlockingQueue的核心部分就分析完了，其余的队列操作基本上都是换汤不换药的，此处不再一一列举。</p>
</div>
        </div>
      </div>

      <div class="visitor_edit">
        <!-- further readings -->
        <div id="further-readings" data-user-slug="" data-user-nickname="">
          <div id="further-reading-line" class="hide further-reading-line"></div>
          <ul id="further-readings-list" class="reading-list unstyled"></ul>
          <div id="further-reading-new" class="reading-edit">
              <a data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
                <i class="fa fa-plus-circle"></i> 推荐拓展阅读
</a>            <div id="further-reading-form"></div>
          </div>
        </div>
        <div class="pull-right">
          <!-- copyright -->
          <div class="author-copyright pull-right" data-toggle="tooltip" data-html="true" title="" data-original-title="转载请联系作者获得授权，并标注“简书作者”。">
            <a><i class="fa fa-copyright"></i> 著作权归作者所有</a>
          </div>
        </div>
      </div>

      <!-- Reward / Support Author -->
        <div class="support-author">
          <p>如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作！</p>
            <a class="btn btn-pay" data-toggle="modal" href="http://www.jianshu.com/p/9a652250e0d1#pay-modal">¥ 打赏支持</a>
          <div class="avatar-list"></div>
        </div>

      <!-- article meta bottom -->
      <div class="meta-bottom clearfix">
        <!--  Like Button -->
        <div class="like ">
            <div class="like-button">
              <a id="like-note" class="like-content" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
                <i class="fa fa-heart-o"></i>  喜欢
</a></div>          <span id="likes-count" data-toggle="tooltip" data-placement="right" title="" data-original-title="查看所有喜欢的用户">0</span>        </div>
        <!--  share group -->
        <div class="share-group pull-right">
          <a href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f=&#39;http://v.t.sina.com.cn/share/share.php?appkey=1881139527&#39;,u=z||d.location,p=[&#39;&amp;url=&#39;,e(u),&#39;&amp;title=&#39;,e(t||d.title),&#39;&amp;source=&#39;,e(r),&#39;&amp;sourceUrl=&#39;,e(l),&#39;&amp;content=&#39;,c||&#39;gb2312&#39;,&#39;&amp;pic=&#39;,e(p||&#39;&#39;)].join(&#39;&#39;);function%20a(){if(!window.open([f,p].join(&#39;&#39;),&#39;mb&#39;,[&#39;toolbar=0,status=0,resizable=1,width=440,height=430,left=&#39;,(s.width-440)/2,&#39;,top=&#39;,(s.height-430)/2].join(&#39;&#39;)))u.href=[f,p].join(&#39;&#39;);};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,&#39;&#39;,&#39;&#39;,&#39;http://cwb.assets.jianshu.io/notes/images/3164580/weibo/image_53107dc79d91.jpg&#39;, &#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @简书 ）&#39;,&#39;http://www.jianshu.com/p/9a652250e0d1&#39;,&#39;页面编码gb2312|utf-8默认gb2312&#39;));" data-name="weibo">
            <i class="fa fa-weibo"></i><span>分享到微博</span>
          </a>
          <a data-toggle="modal" href="http://www.jianshu.com/p/9a652250e0d1#share-weixin-modal" data-name="weixin">
            <i class="fa fa-weixin"></i><span>分享到微信</span>
          </a>
          <div class="more">
            <a href="javascript:void(0)" data-toggle="dropdown">更多分享<i class="fa fa-caret-down"></i></a>
            <ul class="dropdown-menu arrow-top">
                <li><a href="http://cwb.assets.jianshu.io/notes/images/3164580/weibo/image_53107dc79d91.jpg" target="_blank" data-name="changweibo"><i class="fa fa-arrow-circle-o-down"></i> 下载长微博图片</a></li>
                <li>
                  <a data-name="tweibo" href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;http://share.v.t.qq.com/index.php?c=share&amp;a=index&amp;url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @jianshuio ）&#39;),x=function(){if(!window.open(r,&#39;tweibo&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/tweibo.png" alt="Tweibo"> 分享到腾讯微博
</a>                </li>
                <li>
                  <a data-name="qzone" href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》&#39;),x=function(){if(!window.open(r,&#39;qzone&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/qzone.png" alt="Qzone"> 分享到QQ空间
</a>                </li>
                <li>
                  <a data-name="twitter" href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://twitter.com/share?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;text=&#39;+e(&#39;推荐 码农一枚 的文章《ArrayBlockingQueue源码分析》（ 分享自 @jianshucom ）&#39;)+&#39;&amp;related=&#39;+e(&#39;jianshucom&#39;),x=function(){if(!window.open(r,&#39;twitter&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/twitter.png" alt="Twitter"> 分享到Twitter
</a>                </li>
                <li>
                  <a data-name="facebook" href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://www.facebook.com/dialog/share?app_id=483126645039390&amp;display=popup&amp;href=http://www.jianshu.com/p/9a652250e0d1&#39;,x=function(){if(!window.open(r,&#39;facebook&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/facebook.png" alt="Facebook"> 分享到Facebook
</a>                </li>
                <li>
                  <a data-name="google_plus" href="javascript:void(function(){var d=document,e=encodeURIComponent,r=&#39;https://plus.google.com/share?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;),x=function(){if(!window.open(r,&#39;google_plus&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/google_plus.png" alt="Google plus"> 分享到Google+
</a>                </li>
                <li>
                  <a data-name="douban" href="javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:&#39;&#39;,r=&#39;http://www.douban.com/recommend/?url=&#39;+e(&#39;http://www.jianshu.com/p/9a652250e0d1&#39;)+&#39;&amp;title=&#39;+e(&#39;ArrayBlockingQueue源码分析&#39;)+&#39;&amp;sel=&#39;+e(s)+&#39;&amp;v=1&#39;,x=function(){if(!window.open(r,&#39;douban&#39;,&#39;toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330&#39;))location.href=r+&#39;&amp;r=1&#39;};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()">
                    <img src="./ArrayBlockingQueue源码分析 - 简书_files/douban.png" alt="Douban"> 分享到豆瓣
</a>                </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Modals -->
      <div id="share-weixin-modal" class="modal hide fade share-weixin-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  </div>
  <div class="modal-body" title="http://www.jianshu.com/p/9a652250e0d1?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weixin">
    <h5>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</h5>
  <canvas width="170" height="170" style="display: none;"></canvas><img src="data:image/png;base64,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" style="display: block;"></div>
</div>

      
      <div id="notebooks-menu" class="panel notebooks-menu arrow-top modal hide fade"><img class="loader-tiny" src="./ArrayBlockingQueue源码分析 - 简书_files/tiny.gif" alt="Tiny"></div>
      <div id="collection-menu" class="panel collection-menu arrow-top modal hide fade"><img class="loader-tiny" src="./ArrayBlockingQueue源码分析 - 简书_files/tiny.gif" alt="Tiny"></div>
      
      <div id="likes-modal" class="modal modal_new support_list-modal fullscreen hide fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>喜欢的用户</h3>
      </div>
      <div class="modal-body">
        <ul class="unstyled users">
        </ul>
      </div>
    </div>
  </div>
</div>



    <!-- Comments -->
    <div id="comments" class="comment-list clearfix">
        <div class="comment-head clearfix">
          0条评论
          <span class="order">
            （
            <a data-order="asc" class="active" href="javascript:void(0)">按时间正序</a>·
            <a data-order="desc" href="javascript:void(0)">按时间倒序</a>·
            <a data-order="likes_count" href="javascript:void(0)">按喜欢排序</a>
            ）
          </span>
            <a class="goto-comment pull-right" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
              <i class="fa fa-pencil"></i>添加新评论
</a>        </div>
        <div id="comment-list">



  <p class="load-more">没有更多评论了</p>
</div>
          <p class="signout-comment">
    <a class="btn btn-info" data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in">
      登录后发表评论
</a>  </p>

    </div>
    <!-- -->

  </div>

  <script type="application/json" data-name="note">
    {"id":3164580,"abbr":"前言本文的主要详细分析ArrayBlockingQueue的实现原理，由于该并发集合其底层是使用了java.util.ReentrantLock和java.util.Condition来完成并发控制的，我们可以通过JDK的源代码更好的学习这些并发控制类的使用，同时该类也是所有并发集合中最简单的一个，分析该类的源码也是为之后分析其他并发集合做好基础。1.Queue接口和BlockingQueue接口回顾1.1Queue接口回顾在Queue接口中，除了继承Collection接口中定义的方法外，它还分别额外地定义插入、删除、查询这3个操作，其中每一个操...","slug":"9a652250e0d1","url":"http://www.jianshu.com/p/9a652250e0d1","image_url":"http://cwb.assets.jianshu.io/notes/images/3164580/weibo/image_53107dc79d91.jpg","wordage":1996,"has_further_readings":false,"views_count":355,"likes_count":0,"comments_count":0,"rewards_total_count":0}
  </script>

  <script type="application/json" data-name="uuid">
    {"uuid":"ae343fbc-582c-4548-97af-73fda4bd37ac"}
  </script>

  <script type="application/json" data-name="author">
    {"id":1684370,"nickname":"码农一枚","slug":"dc9be3b69337","public_notes_count":9,"followers_count":110,"total_likes_count":97,"is_current_user":false,"is_signed_author":false}
  </script>


  <div class="include-collection">
    <div class="content">

      
        <h5>被以下专题收入，发现更多相似内容：</h5>
        <ul id="all-collections" class="unstyled collections-list">
            <li>
              <a class="avatar" href="http://www.jianshu.com/collection/NEt52a"><img src="./ArrayBlockingQueue源码分析 - 简书_files/computer_guy.jpg" alt="180"></a>              <div class="collections-info">
                <h5>
                  <a href="http://www.jianshu.com/collection/NEt52a">程序员</a>
                </h5>
                
  <div class="btn btn-success follow">
    <a data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in"><i class="fa fa-fw fa-plus"></i>  <span>添加关注</span></a>
    <span>254.5K</span>
  </div>

                <p class="description">如果你是程序员，或者有一颗喜欢写程序的心，喜欢分享技术干货、项目经验、程序员日常囧事等等，欢迎投稿《程序员》专题。

专题主编：小...</p>
                <p>
                  <a class="blue-link" href="http://www.jianshu.com/collection/NEt52a">30046篇文章</a> · 254597人关注
                </p>
              </div>
            </li>
            <li>
              <a class="avatar" href="http://www.jianshu.com/collection/acd3638cc950"><img src="./ArrayBlockingQueue源码分析 - 简书_files/1eeef3c955646f09ec9b6777d7eb4db1.jpg" alt="180"></a>              <div class="collections-info">
                <h5>
                  <a href="http://www.jianshu.com/collection/acd3638cc950">技术文</a>
                </h5>
                
  <div class="btn btn-success follow">
    <a data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in"><i class="fa fa-fw fa-plus"></i>  <span>添加关注</span></a>
    <span>3.7K</span>
  </div>

                <p class="description">干货技术文。</p>
                <p>
                  <a class="blue-link" href="http://www.jianshu.com/collection/acd3638cc950">2234篇文章</a> · 3755人关注
                </p>
              </div>
            </li>
            <li>
              <a class="avatar" href="http://www.jianshu.com/collection/d9ce9f232a66"><img src="./ArrayBlockingQueue源码分析 - 简书_files/android.graphics.Bitmap_db2de62.jpeg" alt="180"></a>              <div class="collections-info">
                <h5>
                  <a href="http://www.jianshu.com/collection/d9ce9f232a66">java收集</a>
                </h5>
                
  <div class="btn btn-success follow">
    <a data-signin-link="true" data-toggle="modal" href="http://www.jianshu.com/sign_in"><i class="fa fa-fw fa-plus"></i>  <span>添加关注</span></a>
    <span>1</span>
  </div>

                <p class="description">java收集</p>
                <p>
                  <a class="blue-link" href="http://www.jianshu.com/collection/d9ce9f232a66">18篇文章</a> · 1人关注
                </p>
              </div>
            </li>
        </ul>
    </div>
  </div>

  <!-- Modal -->
    <div class="modal pay-modal text-center hide fade" id="pay-modal">
  <div class="modal-header clearfix">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  </div>
  <form id="new_reward" class="new_reward" target="_blank" action="http://www.jianshu.com/notes/3164580/rewards" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="6czDBASVI32r59fBfsdYS7v6x2gsAQMvv2+vvPLBVONQCzvJIAbVe6U5hmibELOknQ7VyskOyQjQDkP2Vi+DeA==">
    <div class="modal-body">
      <a href="http://www.jianshu.com/users/dc9be3b69337">
        <div class="avatar"><img src="./ArrayBlockingQueue源码分析 - 简书_files/675ca95f25be.png" alt="100"></div>
</a>      <p><i class="fa fa-quote-left pull-left"></i>如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作！<i class="fa fa-quote-right pull-right"></i></p>
      <div class="main-inputs text-left">
        <div class="control-group">
          <label for="reward_amount">打赏金额</label><i class="fa fa-yen"></i>
          <input value="2.00" type="text" name="reward[amount_in_yuan]" id="reward_amount_in_yuan">
        </div>
        <div class="control-group message">
          <textarea placeholder="给Ta留言" name="reward[message]" id="reward_message"></textarea>
        </div>
      </div>
      <div class="choose-pay text-left">
        <h5>选择支付方式：</h5>
        <div>
          <label for="reward_channel_alipay">
            <div class="iradio_minimal checked" style="position: relative;"><input type="radio" value="alipay" checked="checked" name="reward[channel]" id="reward_channel_alipay" style="position: absolute; opacity: 0;"><ins class="iCheck-helper" style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;"></ins></div>
            <span class="alipay-bg"></span>
</label>
          
          <label for="reward_channel_wx_pub_qr">
            <div class="iradio_minimal" style="position: relative;"><input type="radio" value="wx_pub_qr" name="reward[channel]" id="reward_channel_wx_pub_qr" style="position: absolute; opacity: 0;"><ins class="iCheck-helper" style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;"></ins></div>
            微信支付
</label>        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button name="button" type="submit" class="btn btn-large btn-pay">立即支付</button>
    </div>
</form></div>

    <div class="modal success-pay text-center hide fade" id="success-pay">
  <div class="modal-header clearfix">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  </div>
  <div class="modal-body">
    <h3><i class="icon-ok"></i>打赏成功</h3>
    <img src="./ArrayBlockingQueue源码分析 - 简书_files/complete-pay-25426877089eb23bd76d9d0e6aad89c1.png" alt="Complete pay">
  </div>
  <div class="modal-footer">
    
  </div>
</div>

</div>

  <div class="imagebubble-backmask image-package" style="z-index: 1000;"><div class="image-caption">ArrayBlockingQueueAPI说明.png</div><div class="image-caption">1-1.png</div><div class="image-caption">1-2.png</div><img class="imagebubble-ghost" src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-74dd3cf6fd2be432(1).png" style="top: 5517px; left: 556.5px; width: 620px; height: 146px;"><img class="imagebubble-ghost" src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-bdbe3fe4f43d5130(1).png" style="top: 5805px; left: 556.5px; width: 620px; height: 145px;"><img class="imagebubble-ghost" src="./ArrayBlockingQueue源码分析 - 简书_files/1684370-ca508b8735c40257(1).png" style="top: 2593px; left: 556.5px; width: 620px; height: 249px;"></div></div>
  <div id="flash" class="hide"></div>
  
  <div id="view-mode-modal" tabindex="-1" class="modal hide read-modal" aria-hidden="false" data-js-module="view-mode-modal">
    <div class="btn-group change-background" data-toggle="buttons-radio">
      <a class="btn btn-daytime active" data-mode="day" href="javascript:void(null);">
        <i class="fa fa-sun-o"></i>
</a>      <a class="btn btn-nighttime " data-mode="night" href="javascript:void(null);">
        <i class="fa fa-moon-o"></i>
</a>    </div>
    <div class="btn-group change-font" data-toggle="buttons-radio">
      <a class="btn font " data-font="font1" href="javascript:void(null);">宋体</a>
      <a class="btn font hei active" data-font="font2" href="javascript:void(null);">黑体</a>
    </div>
    <div class="btn-group change-locale" data-toggle="buttons-radio">
      <a class="btn font active" data-locale="zh-CN" href="javascript:void(null);">简</a>
      <a class="btn font hei " data-locale="zh-TW" href="javascript:void(null);">繁</a>
    </div>
  </div>

  

  <script src="./ArrayBlockingQueue源码分析 - 简书_files/base-90f2ea0f7da77d330f3fe2acdcf5d595.js.download"></script>
  
  <script src="./ArrayBlockingQueue源码分析 - 简书_files/reading-base-0028299ec0c770293c0f07e2f338b48f.js.download"></script>
  <script src="./ArrayBlockingQueue源码分析 - 简书_files/note_show-cc5c20512664aad53acca20308dd4d1c.js.download"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35169517-1', 'auto');
  ga('send', 'pageview');
</script>

<div style="display:none">
  <script src="./ArrayBlockingQueue源码分析 - 简书_files/z_stat.php" language="JavaScript"></script><script src="./ArrayBlockingQueue源码分析 - 简书_files/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=1258679142" target="_blank" title="站长统计">站长统计</a>
</div>

<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
</script>



</body></html>